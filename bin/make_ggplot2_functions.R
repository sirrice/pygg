# create bindings.py from R directly
# Rscript bin/make_ggplot2_functions.R > pygg/ggplot2_functions.py
# edit pygg/pygg.py and remove old bindings
library(ggplot2)

exclude = c(
  "%+%",
  "%+replace%",
  "aes_q",
  "benchplot",
  "fortify",
  "ggstructure",
  "gg_dep",
  "ggplot_build",
  "ggplot_gtable",
  "ggplotGrob",
  "is.Coord",
  "is.ggproto",
  "is.facet",
  "is.ggplot",
  "is.theme",
  "last_plot",
  "map_data",
  "mean_cl_boot",
  "mean_cl_normal",
  "mean_sdl",
  "mean_se",
  "median_hilow",
  "should_stop",
  "waiver",

  # special handling in pygg itself
  "facet_wrap",
  "facet_grid",
  "ggsave"
)

# generate pygg commands file
cat("# generated by make_ggplot2_binding\n")
cat(sprintf("# ggplot2 library version: %s\n", packageVersion("ggplot2")))
cat(sprintf("# date: %s\n", date()))
cat('ggplot2_functions = [')
cat(paste(
          lapply(
                 setdiff(lsf.str('package:ggplot2'), exclude),
                 function(x) sprintf("'%s'", x)),
          collapse = ',\n'))
cat(']')
