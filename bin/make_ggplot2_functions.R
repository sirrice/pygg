# create bindings.py from R directly
# Rscript bin/make_ggplot2_functions.R >> pygg/pygg.py
# edit pygg/pygg.py and remove old bindings
library(ggplot2)

exclude = c(
  "%+%",
  "%+replace%",
  "aes_q",
  "benchplot",
  "fortify",
  "ggstructure",
  "gg_dep",
  "ggplot_build",
  "ggplot_gtable",
  "ggplotGrob",
  "is.coord",
  "is.Coord",
  "is.ggproto",
  "is.facet",
  "is.ggplot",
  "is.theme",
  "last_plot",
  "map_data",
  "mean_cl_boot",
  "mean_cl_normal",
  "mean_sdl",
  "mean_se",
  "median_hilow",
  "should_stop",
  "waiver",

  # special handling in pygg itself
  "facet_wrap",
  "facet_grid",
  "ggsave"
)

# generate pygg commands file
cat("# generated by make_ggplot2_binding\n")
cat(sprintf("# ggplot2 library version: %s\n", packageVersion("ggplot2")))
cat(sprintf("# date: %s\n", date()))
for ( x in setdiff(lsf.str("package:ggplot2"), exclude) ) {
  cat(sprintf('%s = make_ggplot2_binding("%s")\n', x, x))
}
